import{_ as e,o as a,c as n,a2 as s}from"./chunks/framework.D3n7QxxD.js";const u=JSON.parse('{"title":"Introduction","description":"","frontmatter":{},"headers":[],"relativePath":"en/introduction.md","filePath":"en/introduction.md"}'),r={name:"en/introduction.md"};function i(o,t,d,l,c,p){return a(),n("div",null,[...t[0]||(t[0]=[s(`<h1 id="introduction" tabindex="-1">Introduction <a class="header-anchor" href="#introduction" aria-label="Permalink to &quot;Introduction&quot;">​</a></h1><p>AnimeSub is a self-hosted anime subscription and auto-download application. It aggregates multiple anime databases to display daily airing schedules, and automatically tracks and downloads new episodes via Mikan RSS feeds.</p><h2 id="features" tabindex="-1">Features <a class="header-anchor" href="#features" aria-label="Permalink to &quot;Features&quot;">​</a></h2><ul><li><strong>Daily Schedule</strong>: Weekly airing timetable sourced from Bangumi, with TMDB landscape backdrops</li><li><strong>Top 10 Rankings</strong>: Three simultaneous charts from Bangumi, AniList Trending, and MyAnimeList</li><li><strong>Search &amp; Download</strong>: Search for anime resources via Mikan (primary source), filterable by resolution and subtitle type</li><li><strong>Subscription Management</strong>: Create/edit/delete subscriptions with keyword include/exclude and fansub group filtering</li><li><strong>Auto Download</strong>: Background RSS polling service pushes new torrents to qBittorrent automatically</li><li><strong>Download Manager</strong>: View torrent list, pause/resume/delete tasks, real-time progress tracking</li><li><strong>Web Settings</strong>: Configure everything in the browser — no config file editing required</li></ul><h2 id="system-architecture" tabindex="-1">System Architecture <a class="header-anchor" href="#system-architecture" aria-label="Permalink to &quot;System Architecture&quot;">​</a></h2><h3 id="data-aggregation-flow" tabindex="-1">Data Aggregation Flow <a class="header-anchor" href="#data-aggregation-flow" aria-label="Permalink to &quot;Data Aggregation Flow&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Frontend Request → AnimeController</span></span>
<span class="line"><span>    ├── Bangumi API   → Schedule, ratings, portrait posters, air_date (primary)</span></span>
<span class="line"><span>    ├── TMDB API      → English metadata, landscape backdrops (smart matching)</span></span>
<span class="line"><span>    └── AniList GraphQL → English titles/descriptions (fallback)</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>AnimeInfo[] → Frontend caches in sessionStorage</span></span></code></pre></div><p><strong>TMDB Smart Matching</strong>:</p><ul><li>Prioritizes Animation genre (genre_id=16) over live-action results</li><li>Prefers Japanese origin (origin_country=JP) when multiple matches exist</li><li>Uses Bangumi <code>air_date</code> year to filter multi-season series and match the correct season&#39;s artwork</li></ul><h3 id="subscription-download-flow" tabindex="-1">Subscription &amp; Download Flow <a class="header-anchor" href="#subscription-download-flow" aria-label="Permalink to &quot;Subscription &amp; Download Flow&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>User Creates Subscription → SubscriptionController</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>RssPollingService (Background, every 30 min)</span></span>
<span class="line"><span>    ├── Fetch Mikan RSS feed</span></span>
<span class="line"><span>    ├── Filter by fansub group / keywords</span></span>
<span class="line"><span>    ├── Deduplicate against DownloadHistory (by torrent hash)</span></span>
<span class="line"><span>    └── Push new torrents to qBittorrent</span></span></code></pre></div><h3 id="pre-fetch-architecture" tabindex="-1">Pre-fetch Architecture <a class="header-anchor" href="#pre-fetch-architecture" aria-label="Permalink to &quot;Pre-fetch Architecture&quot;">​</a></h3><p>To achieve sub-100ms response times, the system pre-fetches the full week&#39;s airing data nightly and stores it in SQLite:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Pre-fetch Service (runs at 3 AM daily)</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>Fetch full calendar → Batch-aggregate Bangumi + TMDB + AniList data</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>Write to SQLite → Frontend reads from DB (&lt;100ms)</span></span></code></pre></div><table tabindex="0"><thead><tr><th>Metric</th><th>Real-time Aggregation (old)</th><th>Pre-fetch Architecture (current)</th></tr></thead><tbody><tr><td>Response time</td><td>3–10 seconds</td><td>&lt;100ms</td></tr><tr><td>API call timing</td><td>On every request</td><td>Nightly batch only</td></tr><tr><td>Failure impact</td><td>External API outage affects users</td><td>Database as fallback</td></tr></tbody></table><h2 id="tech-stack" tabindex="-1">Tech Stack <a class="header-anchor" href="#tech-stack" aria-label="Permalink to &quot;Tech Stack&quot;">​</a></h2><table tabindex="0"><thead><tr><th>Layer</th><th>Technology</th></tr></thead><tbody><tr><td>Frontend</td><td>React 19 + TypeScript + Vite + Tailwind CSS + Zustand</td></tr><tr><td>Backend</td><td>.NET 9 ASP.NET Core</td></tr><tr><td>Database</td><td>SQLite (via Entity Framework Core)</td></tr><tr><td>Containerization</td><td>Docker + Docker Compose</td></tr><tr><td>Authentication</td><td>JWT (HMAC-SHA256) + bcrypt</td></tr></tbody></table><h2 id="external-service-dependencies" tabindex="-1">External Service Dependencies <a class="header-anchor" href="#external-service-dependencies" aria-label="Permalink to &quot;External Service Dependencies&quot;">​</a></h2><table tabindex="0"><thead><tr><th>Service</th><th>Purpose</th><th>Required?</th></tr></thead><tbody><tr><td><a href="https://bangumi.tv" target="_blank" rel="noreferrer">Bangumi</a></td><td>Daily schedule, ratings, cover images</td><td>Yes</td></tr><tr><td><a href="https://www.themoviedb.org" target="_blank" rel="noreferrer">TMDB</a></td><td>English metadata, landscape backdrops</td><td>No (disables English content and backdrops)</td></tr><tr><td><a href="https://anilist.co" target="_blank" rel="noreferrer">AniList</a></td><td>English title/description fallback</td><td>No</td></tr><tr><td><a href="https://mikanani.me" target="_blank" rel="noreferrer">Mikan</a></td><td>Anime RSS torrent feeds</td><td>Required for subscriptions</td></tr><tr><td>qBittorrent</td><td>Torrent download management</td><td>Required for downloads</td></tr></tbody></table>`,19)])])}const g=e(r,[["render",i]]);export{u as __pageData,g as default};
